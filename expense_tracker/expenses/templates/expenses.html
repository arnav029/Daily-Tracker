<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expense Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background: linear-gradient(135deg, #0d0d0f, #1a1a1d);
    color: #e5e5e5;
    font-family: 'Inter', sans-serif;
  }
  .glass {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }
  .soft-shadow {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  }
  .fade-in-up {
    animation: fadeInUp 0.4s ease forwards;
  }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body class="p-6">

<h1 class="text-3xl font-bold text-center text-purple-300 mb-8 soft-shadow p-4 rounded-xl glass">
  ðŸ’Ž Expense Dashboard
</h1>

<div class="overflow-x-auto glow rounded-lg p-4 bg-opacity-10 bg-purple-800">
  <table class="min-w-full text-white border-collapse">
    <thead>
      <tr class="bg-purple-700 text-lg">
        <th class="py-3 px-4 text-left">Category</th>
        <th class="py-3 px-4 text-left">Amount</th>
        <th class="py-3 px-4 text-left">Date</th>
        <th class="py-3 px-4 text-left">Note</th>
        <th class="py-3 px-4 text-center">Actions</th> <!-- Added this -->
      </tr>
    </thead>
    <tbody id="expenseTable"></tbody>
  </table>
</div>


<script>
async function loadExpenses() {
    const res = await fetch('/api/expenses/');
    const data = await res.json();
    const tbody = document.getElementById('expenseTable');
    tbody.innerHTML = '';

    data.forEach((exp, index) => {
        const row = document.createElement('tr');
        row.className = "hover:bg-purple-900 transition duration-300 fade-in";
        row.style.animationDelay = `${index * 0.05}s`;
        row.innerHTML = `
          <td class="py-2 px-4">${exp.category}</td>
          <td class="py-2 px-4">â‚¹${exp.amount}</td>
          <td class="py-2 px-4">${exp.date}</td>
          <td class="py-2 px-4">${exp.note || '-'}</td>
          <td class="py-2 px-4 text-center">
            <button onclick="deleteExpense(${exp.id})"
              class="bg-red-600 hover:bg-red-700 text-white text-sm px-2 py-1 rounded-md shadow-sm">
              âœ–
            </button>
          </td>
        `;
        tbody.appendChild(row);
    });
}

async function deleteExpense(id) {
    if (!confirm("Are you sure you want to delete this expense?")) return;
    const res = await fetch(`/api/expenses/${id}/`, { method: 'DELETE' });
    if (res.ok) {
        loadExpenses();
    } else {
        alert("Failed to delete expense");
    }
}

loadExpenses();
</script>



</body>
</html>
