<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expense Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.6.0/dist/full.css" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body { 
      font-family: 'Poppins', sans-serif; 
      background: radial-gradient(circle at top, #0f172a, #020617);
      color: white;
      min-height: 100vh;
    }
    .glow {
      box-shadow: 0 0 15px rgba(99, 102, 241, 0.8), 0 0 30px rgba(99, 102, 241, 0.4);
    }
    .neon-text {
      text-shadow: 0 0 5px #60a5fa, 0 0 10px #3b82f6, 0 0 20px #1d4ed8;
    }
  </style>
</head>
<body class="flex items-center justify-center p-4">

  <div class="w-full max-w-md bg-gray-900 bg-opacity-90 backdrop-blur-lg rounded-2xl p-8 border border-indigo-500 glow">
    <h1 class="text-3xl font-bold text-center neon-text mb-6">ðŸ’° Expense Tracker</h1>

    <form id="expenseForm" class="space-y-4">
      {% csrf_token %}
      <input name="category" type="text" placeholder="Category" required
        class="input input-bordered w-full bg-gray-800 text-white focus:border-indigo-400" />
      <input name="amount" type="number" step="0.01" placeholder="Amount" required
        class="input input-bordered w-full bg-gray-800 text-white focus:border-indigo-400" />
      <input name="date" type="date" required
        class="input input-bordered w-full bg-gray-800 text-white focus:border-indigo-400" />
      <input name="note" type="text" placeholder="Note"
        class="input input-bordered w-full bg-gray-800 text-white focus:border-indigo-400" />
      <button type="submit" class="btn w-full bg-indigo-500 hover:bg-indigo-400 text-lg text-white glow">
        Add Expense
      </button>
    </form>
  </div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const api = '/api/expenses/';
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    document.getElementById('expenseForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const json = Object.fromEntries(formData);

        await fetch(api, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
            },
            body: JSON.stringify(json)
        });

        // Nice floating notification
        const toast = document.createElement("div");
        toast.innerText = "âœ… Expense Added!";
        toast.className = "fixed bottom-6 right-6 bg-indigo-600 text-white px-4 py-2 rounded-lg glow animate-bounce";
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 2000);

        e.target.reset();
    });
});
</script>

</body>
</html>
